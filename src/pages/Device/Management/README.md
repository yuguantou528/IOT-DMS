# 设备管理模块

## 功能概述

设备管理模块是物联网设备管理平台原型的核心组件，用于管理和监控各类物联网设备。该模块支持370M基站、Mesh电台、卫星通信、视频监控等设备的管理，关联设备参数，展示视频数据、录像数据、拓扑图、参数属性等。

## 主要功能

### 1. 设备列表展示
- 以表格形式展示所有设备信息
- 支持分页显示，可自定义每页显示数量
- 实时显示设备状态（在线/离线/维护中等）
- 支持表格列的排序和筛选

### 2. 搜索和筛选功能
- **按设备名称/编码搜索**：支持模糊搜索设备名称或编码
- **按厂商筛选**：可筛选不同厂商的设备
- **按设备类型筛选**：可筛选不同类型的设备
- **按状态筛选**：可筛选不同状态的设备
- **重置功能**：一键清空所有搜索条件

### 3. 设备信息管理
- **新增设备**：添加新的设备信息
- **编辑设备**：修改现有设备的详细信息
- **删除设备**：删除不需要的设备记录
- **查看详情**：查看设备的完整信息
- **测试连接**：测试设备的连接状态

### 4. 设备详情展示
- **基本信息**：设备名称、编码、序列号、类型等
- **连接信息**：IP地址、端口、用户名、密码等
- **状态信息**：设备状态、连接状态、最后在线时间等
- **其他信息**：安装日期、保修到期日、描述等

## 数据字段

| 字段名称 | 字段类型 | 是否必填 | 说明 |
|---------|---------|---------|------|
| name | String | 是 | 设备名称 |
| deviceCode | String | 是 | 设备编码（唯一） |
| serialNumber | String | 是 | 设备序列号（唯一） |
| manufacturerId | Number | 是 | 所属厂商ID |
| manufacturerName | String | 自动 | 所属厂商名称 |
| modelId | Number | 是 | 设备型号ID |
| modelName | String | 自动 | 设备型号名称 |
| deviceType | String | 自动 | 设备类型（从型号获取） |
| location | String | 是 | 设备位置 |
| ipAddress | String | 是 | IP地址 |
| port | Number | 是 | 端口号 |
| username | String | 是 | 用户名 |
| password | String | 是 | 密码 |
| status | String | 是 | 设备状态 |
| connectionStatus | String | 自动 | 连接状态 |
| lastOnlineTime | String | 自动 | 最后在线时间 |
| installDate | String | 否 | 安装日期 |
| warrantyExpiry | String | 否 | 保修到期日 |
| description | String | 否 | 设备描述 |
| createTime | String | 自动 | 创建时间 |
| updateTime | String | 自动 | 更新时间 |

## 设备状态

### 设备状态选项
- **在线**：设备正常工作中
- **离线**：设备未连接或不可达
- **维护中**：设备正在进行维护
- **故障**：设备出现故障
- **已禁用**：设备被手动禁用

### 连接状态选项
- **已连接**：设备连接正常
- **未连接**：设备未连接
- **连接中**：正在尝试连接设备
- **连接超时**：连接设备超时

## 布局设计

采用标准的双Card布局设计：

### 搜索区域
- 独立的Card组件
- 包含设备名称/编码搜索、厂商筛选、类型筛选、状态筛选
- 只保留搜索和重置按钮

### 列表区域
- 独立的Card组件
- 标题栏右侧包含"新增设备"和"导出"按钮
- 包含数据表格和分页组件

## 操作说明

### 新增设备
1. 点击列表区域标题栏的"新增设备"按钮
2. 在弹出的表单中填写设备信息：
   - 基本信息：设备名称、设备编码、序列号、设备状态、所属厂商、设备型号、设备位置、设备描述
   - 连接信息：IP地址、端口、用户名、密码
   - 其他信息：安装日期、保修到期日
3. 点击"确定"保存

### 编辑设备
1. 在设备列表中点击"编辑"按钮
2. 在弹出的表单中修改设备信息
3. 点击"确定"保存修改

### 查看设备详情
1. 在设备列表中点击"查看详情"按钮（眼睛图标）
2. 在右侧弹出的抽屉中查看完整的设备信息
3. 可以在详情页面直接进行"测试连接"和"编辑"操作

### 测试设备连接
1. 在设备列表中点击"测试连接"按钮（链接图标）
2. 系统会尝试连接设备并返回连接结果
3. 连接成功后会自动更新设备状态和最后在线时间

### 删除设备
1. 在设备列表中点击"删除"按钮
2. 在确认对话框中点击"确定"

### 搜索设备
1. 在搜索框中输入设备名称或编码
2. 选择厂商、设备类型、状态等筛选条件
3. 点击"搜索"按钮

## 技术实现

### 前端技术栈
- **React**: 用户界面构建
- **Ant Design**: UI组件库
- **React Router**: 路由管理
- **CSS Modules**: 样式管理
- **Moment.js**: 日期处理

### 组件结构
```
src/pages/Device/Management/
├── index.js              # 主组件
├── index.module.css      # 样式文件
└── README.md            # 说明文档
```

### API服务
```
src/services/deviceManagement.js
├── getDeviceList()          # 获取设备列表
├── createDevice()           # 创建设备
├── updateDevice()           # 更新设备
├── deleteDevice()           # 删除设备
├── testDeviceConnection()   # 测试设备连接
├── exportDeviceData()       # 导出数据
└── 各种状态常量             # 设备状态、连接状态等
```

## 与其他模块的关联

### 与设备厂商模块
- 设备必须关联到具体的设备厂商
- 新增/编辑设备时从厂商模块获取厂商列表
- 支持按厂商筛选设备

### 与设备型号模块
- 设备必须关联到具体的设备型号
- 新增/编辑设备时从型号模块获取型号列表
- 型号选择会自动关联设备类型
- 支持按型号筛选设备

### 数据一致性
- 厂商或型号被删除时，需要处理关联的设备
- 厂商或型号状态变更时，影响设备的可选项
- 保持数据的完整性和一致性

## 设备连接管理

### 连接测试功能
- 支持实时测试设备连接状态
- 提供连接成功/失败的反馈
- 记录连接响应时间
- 自动更新设备状态和最后在线时间

### 连接安全性
- 密码信息加密存储
- 详情页面密码显示为掩码
- 支持修改连接凭证

## 响应式设计

模块支持响应式设计，适配不同屏幕尺寸：

- **桌面端**：完整功能展示，表格横向滚动
- **平板端**：适配中等屏幕，调整列宽
- **移动端**：垂直布局，优化触摸操作

## 扩展功能

### 已实现功能
- ✅ 基础CRUD操作
- ✅ 搜索和筛选
- ✅ 厂商和型号关联
- ✅ 设备详情查看
- ✅ 连接测试功能
- ✅ 标准布局设计
- ✅ 响应式适配

### 计划功能
- 🔄 批量操作功能
- 🔄 设备监控功能
- 🔄 设备分组管理
- 🔄 设备地图展示
- 🔄 设备告警管理
- 🔄 设备数据可视化

## 注意事项

1. **数据关联性**：确保设备与厂商、型号的关联关系正确
2. **编码唯一性**：设备编码和序列号必须保持唯一
3. **连接安全性**：设备连接信息需要安全存储和传输
4. **状态管理**：设备状态变更需要记录历史记录
5. **性能考虑**：大量设备时需要考虑分页和性能优化

## 更新日志

### v1.0.0 (2024-01-21)
- 初始版本发布
- 实现基础的CRUD功能
- 添加搜索和筛选功能
- 实现厂商和型号关联
- 添加设备详情查看功能
- 实现设备连接测试功能
- 采用标准布局设计
- 实现响应式设计

---

**开发状态**: 基础版本完成  
**下一步**: 集成真实API服务，添加批量操作和监控功能  
**维护者**: 开发团队
