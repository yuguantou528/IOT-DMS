# 地图切换功能说明

## 功能概述

可视化监控大屏现已支持地图类型切换功能，用户可以在"天地图"和"卫星图"两种视图之间自由切换。

## 功能特性

### 1. 图片替换功能
- 支持使用真实的天地图截图作为地图背景
- 图片自动适配地图容器尺寸
- 支持图片加载失败时的降级处理

### 2. 地图切换按钮
- 位置：地图区域右上角
- 样式：半透明黑色背景，带有毛玻璃效果
- 图标：天地图模式显示卫星图标🛰️，卫星图模式显示地图图标🗺️
- 交互：悬停时有高亮效果和轻微上移动画

### 3. 切换动画
- 平滑的过渡效果（0.5秒）
- 按钮图标和文字同步更新
- 悬停时的缩放和阴影效果

## 使用方法

### 1. 准备图片文件
将您的天地图截图保存到以下位置：
```
public/images/tianditu-map.png
```

可选：如果有卫星图，保存到：
```
public/images/satellite-map.png
```

### 2. 图片要求
- **格式**：PNG（推荐）或 JPG
- **分辨率**：建议 1920x1080 或更高
- **文件大小**：建议小于 5MB
- **内容**：清晰的地图截图，包含地理标识

### 3. 操作步骤
1. 打开可视化监控大屏页面
2. 在地图区域右上角找到切换按钮
3. 点击按钮在两种地图类型间切换
4. 按钮文字和图标会实时更新显示当前可切换的目标类型

## 技术实现

### 1. 状态管理
```javascript
const [mapType, setMapType] = useState('tianditu'); // 'tianditu' 或 'satellite'
```

### 2. 切换逻辑
```javascript
const toggleMapType = () => {
  setMapType(prevType => prevType === 'tianditu' ? 'satellite' : 'tianditu');
};
```

### 3. 条件渲染
- 根据 `mapType` 状态动态渲染不同的地图图层
- 支持图片加载失败时的CSS样式降级

### 4. 样式特性
- 响应式设计，适配不同屏幕尺寸
- 毛玻璃效果和阴影增强视觉层次
- 平滑的过渡动画提升用户体验

## 降级处理

### 1. 图片加载失败
如果图片文件不存在或加载失败，系统会自动：
- 隐藏图片元素
- 显示CSS样式模拟的地图背景
- 保持功能正常运行

### 2. CSS样式模拟
- **天地图模式**：蓝色渐变背景 + 道路网络纹理
- **卫星图模式**：绿色渐变背景 + 地形纹理效果

## 自定义配置

### 1. 修改默认地图类型
在 `StandaloneMonitor.js` 中修改初始状态：
```javascript
const [mapType, setMapType] = useState('satellite'); // 默认显示卫星图
```

### 2. 添加更多地图类型
1. 扩展状态值：`'tianditu' | 'satellite' | 'terrain'`
2. 添加对应的CSS样式类
3. 更新切换逻辑和按钮显示

### 3. 自定义按钮样式
修改 `StandaloneMonitor.module.css` 中的 `.mapToggleBtn` 样式类。

## 注意事项

1. **图片版权**：确保使用的地图截图符合相关版权要求
2. **文件大小**：过大的图片会影响页面加载速度
3. **浏览器兼容性**：毛玻璃效果在较老的浏览器中可能不支持
4. **移动端适配**：在小屏幕设备上按钮会自动调整大小和位置

## 故障排除

### 1. 图片不显示
- 检查图片文件路径是否正确
- 确认图片文件格式是否支持
- 查看浏览器控制台是否有加载错误

### 2. 切换按钮不工作
- 检查JavaScript控制台是否有错误
- 确认React状态更新是否正常

### 3. 样式显示异常
- 清除浏览器缓存
- 检查CSS文件是否正确加载
